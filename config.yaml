---
aiohttp_settings:
  client_max_size: 20971520
databases:
- db:
    storage: postgresql
    transaction_strategy: dbresolve_readcommitted
    dsn: postgresql://postgres:secret@localhost:5432/guillotina
    read_only: false
    pool_size: 100
store_json: true
applications:
- guillotina_cms
- guillotina.contrib.cache
# - guillotina_elasticsearch
# - guillotina_linkintegrity
address: 8081
static:
  favicon.png: static/favicon.png
# pastanaga: pastanaga-angular/dist
# ng: plone-angular-demo/dist
# plone: plone-react
root_user:
  password: root
auth_extractors:
- guillotina.auth.extractors.CookiePolicy
- guillotina.auth.extractors.BearerAuthPolicy
- guillotina.auth.extractors.BasicAuthPolicy
- guillotina.auth.extractors.WSTokenAuthPolicy
auth_token_validators:
- guillotina.auth.validators.SaltedHashPasswordValidator
- guillotina.auth.validators.JWTValidator
redis:
  host: localhost
  port: 6379
jwt:
  secret: secret
  algorithm: HS256
jsapps:
  +admin: guillotina:static/executioner
cors:
  allow_origin:
  - "*"
  allow_methods:
  - GET
  - POST
  - DELETE
  - HEAD
  - PATCH
  - OPTIONS
  - PUT
  allow_headers:
  - "*"
  expose_headers:
  - "*"
  allow_credentials: true
  max_age: 3660
behaviors:
  myannotationdata:
    title: MyData
    type: guillotina.behaviors.instance.AnnotationBehavior
    properties:
      mydata1: 
        type: guillotina.schema.TextLine
        title: Text
        required: false
        default: Hello
  mycontextdata:
    title: MyLocalData
    type: guillotina.behaviors.instance.ContextBehavior
    properties:
      mydata2: 
        type: guillotina.schema.TextLine
        title: Text
        required: false
        default: Hello
contents:
  document:
    title: Document
    allowed_types:
    - Image
    - File
    required:
    - type_name
    - uid
    behaviors:
      guillotina.behaviors.dublincore.IDublinCore
      guillotina_cms.interfaces.base.ICMSBehavior
      guillotina_cms.interfaces.tiles.ITiles
    properties:
      text: 
        type: guillotina_cms.fields.richtext.RichTextField
        widget: richtext
        title: Text
        required: false
        default: Hello
        index: searchabletext        
    fieldsets:
      default:
      - title
      - text
      - guillotina.behaviors.dublincore.IDublinCore.description
      dates:
      - guillotina.behaviors.dublincore.IDublinCore.effective_date
      - guillotina.behaviors.dublincore.IDublinCore.expiration_date
      ownership:
      - guillotina.behaviors.dublincore.IDublinCore.creators
      - guillotina.behaviors.dublincore.IDublinCore.publisher
      - guillotina.behaviors.dublincore.IDublinCore.contributors
      categorization:
      - guillotina.behaviors.dublincore.IDublinCore.tags
      - guillotina_cms.interfaces.base.ICMSBehavior.language
      settings:
      - guillotina_cms.interfaces.base.ICMSBehavior.hidden_navigation
      - guillotina_cms.interfaces.base.ICMSBehavior.content_layout
    layouts:
    - document_view
    - layout_view
    tiles_layout:
    - example1:
        tiles:
          tile1:
            '@type': tilte
          tile2:
            '@type': description
        tiles_layouts:
        - tile1
        - tile2
workflows:
  basic:
    initial_state: private
    states:
      private:
        actions:
            publish:
                title: Publish
                to: public
                check_permission: guillotina.ReviewContent
        set_permission:
            roleperm:
            - setting: Deny
              role: guillotina.Anonymous
              permission: guillotina.ViewContent
            - setting: Deny
              role: guillotina.Anonymous
              permission: guillotina.AccessContent
      public:
        actions:
            retire:
                title: Retire
                to: private
                check_permission: guillotina.ReviewContent
        set_permission:
            roleperm:
            - setting: AllowSingle
              role: guillotina.Anonymous
              permission: guillotina.ViewContent
            - setting: AllowSingle
              role: guillotina.Anonymous
              permission: guillotina.AccessContent
workflows_content:
  guillotina.interfaces.IResource: basic
  guillotina_cms.content.document.IDocument: guillotina_simple_publication
  document: guillotina_simple_publication